<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>My Preso</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/common.css" type="text/css"/>
  

  
    <script type="text/javascript" src="file/sh_diff.js"></script>
  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="one/01_slide/1">
<h1>Web Forms</h1>

<h2>Bogdan Gusiev</h2>

<h3>July 2012</h3></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="one/01_slide/2">
<h2>Web Forms are important</h2>

<p>More important than</p>

<ul>
<li>deploy apps to clouds</li>
<li>follow scrum at 100%</li>
<li>have 100% test coverage</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/3">
<h1><em>New web forms</em> <strong>requirements</strong></h1>

<ul>
<li>Submit with ajax</li>
<li>Small amount of fields</li>
<li>Inline validation</li>
<li>Agile process (more features per second)</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/4">
<h2><strong>Validation</strong> is a problem</h2>

<h3>Move <em>validation to client</em> is main solution</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/5">
<h1>Client side validation</h1>

<p>Different approaches</p>

<ul>
<li><em>Separated</em> client validation code</li>
<li><em>Generated</em> client side validations based on Rails validation</li>
<li>Write validation <em>in JavaScript</em> and execute it in backend</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/6">
<h1>Why like this?</h1>

<ul>
<li><strong>No way</strong> to make 100% reusable</li>
<li>Huge <strong>complexity</strong></li>
<li>Tons of <strong>bugs</strong></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/7">
<h1>Why not to validate on <em>backend always</em>?</h1>

<ul>
<li>Forms are small</li>
<li>AJAX is our friend

<ul>
<li>100ms or even less</li>
</ul>
</li>
<li>Just so easy</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/8">
<h2>Submit a form with ajax</h2>

<h2>obtain data or redirection URL if successful</h2>

<h3>or</h3>

<h2>errors if validation failed</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/9">
<h2>Rework server side</h2>

<pre><code>
 def create
   @user = User.new(params[:user])
   if @user.save
<span class="diff remove">-    redirect_to root_path</span>
<span class="diff add">+    render json: {redirect: root_path}</span>
   else
<span class="diff remove">-    render action: "new"</span>
<span class="diff add">+    render json: {errors: @user.errors}</span>
   end
 end</code></pre>


</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/10">
<h2>Modify form to assign validations</h2>

<pre><code>
<span class="diff remove">-  &lt;div class="field"&gt;</span>
<span class="diff add">+  &lt;div class="field" validate="email"&gt;</span>
    &lt;label&gt;Email&lt;/label&gt;
    &lt;input name="user[email]" /&gt;
   &lt;/div&gt;
<span class="diff remove">-  &lt;div class="field"&gt;</span>
<span class="diff add">+  &lt;div class="field" validate="password"&gt;</span>
     &lt;label&gt;Password&lt;/label&gt;
     &lt;input name="user[password]" /&gt;
   &lt;/div&gt;
</code></pre>


</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/11">
<h2>Add some JS magic</h2>

<p><a href="https://github.com/bogdan/ajaxsubmit">https://github.com/bogdan/ajaxsubmit</a></p>

<pre class="sh_javascript"><code>$.errors.format ='&lt;div 
  class="validation-message 
    validation-text"&gt;&lt;/div&gt;';
$(".ajax-form").ajaxForm()</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/12">
<h1>And a little CSS</h1>

<pre class="sh_css"><code>.validation-text { display: none; }

.validation-active .validation-text {
  display: block;
  color: red;
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/13">
<h2>And it works!</h2>

<p><img src="/image/works.png"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/14">
<ul>
<li>Why to focus on edge cases?</li>
<li>Why to deal with tons of generated code?</li>
<li>Why hardcore debugging?</li>
</ul>


<h2>You don't get all these pain in work flow above</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/15">
<h1>But this is not the end</h1>

<h2>some problems still remain</h2></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/16">
<h1>Inline validation</h1>

<h1>require <em>good formatting</em></h1>

<h1>which yield</h1>

<h1><strong>DESIGN/CSS overhead</strong></h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/17">
<h1>DESIGN/CSS overhead</h1>

<ul>
<li>Design:

<ul>
<li><strong>Errors overlaps</strong> page content</li>
<li><strong>Form jump around</strong> when validation appears</li>
<li>Different errors layout</li>
</ul>
</li>
<li>CSS:

<ul>
<li>input, select, textarea</li>
<li>Implement a beauty of the design</li>
</ul>
</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/18">
<h1>Three variants of design:</h1>

<ul>
<li>Show errors in flat page flow</li>
<li>Show errors on hover</li>
<li>Show errors in popup-like box with close button</li>
</ul>


<p><a href="http://ajaxsubmit.herokuapp.com/">http://ajaxsubmit.herokuapp.com/</a></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/19">
<p><img src="/image/pointer.png"/></p>

<br/>


<p><img src="/image/works.png"/>
<img src="/image/mailtrap.png"/></p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/20">
<h1>Solving CSS overhead</h1>

<ul>
<li>Flexible formatting configuration</li>
<li>Custom DOM for any particular validation error</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/21">
<h1>Ajaxsubmit configuration idea</h1>

<pre class="sh_javascript"><code>$.errors = {
  attribute: "validate"
  activationClass: "validation-active"
  format: "&lt;div class='validation-block'&gt;
    &lt;div class='validation-message'&gt;&lt;/div&gt;
    &lt;/div&gt;"
  messageClass: "validation-message"
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/22">
<pre class="sh_javascript"><code>$.errors.attribute = "validate"</code></pre>

<p>&amp;</p>

<pre class="sh_html"><code>&lt;div validate="company company_id"&gt;
  &lt;select name="company"&gt;...&lt;/select&gt;
&lt;/div&gt;</code></pre>

<p>&amp;</p>

<pre class="sh_javascript"><code>[
  ["company_id", "is blank"],
  ["company", "not included in the list"]
]</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/23">
<pre class="sh_javascript"><code>$.errors.activationClass = 
            "validation-active"</code></pre>

<p>&amp;</p>

<pre class="sh_html"><code>&lt;div class="validation-active" 
  validate="company company_id"&gt;
  &lt;select name="company"&gt;...&lt;/select&gt;
  &lt;!-- Error message here --&gt;
&lt;/div&gt;</code></pre>

<p>&amp;</p>

<pre class="sh_css"><code>.validation-active select {
  color: red;
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/24">
<pre class="sh_javascript"><code>$.errors.format ='&lt;div 
  class="validation-message 
    validation-text"&gt;&lt;/div&gt;'</code></pre>

<p>&amp;</p>

<pre class="sh_html"><code>&lt;div class="validation-active" 
  validate="company company_id"&gt;
  &lt;select name="company"&gt;...&lt;/select&gt;
  &lt;div class="validation-message 
    validation-text"&gt;is blank&lt;/div&gt;
&lt;/div&gt;</code></pre>

<p>&amp;</p>

<h3>More CSS</h3></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/25">
<pre class="sh_javascript"><code>$.errors.messageClass = 
         "validation-message"</code></pre>

<p>Place to insert error message into error format</p></div>
</div><div class="slide" data-transition="none"><div class="content" ref="one/01_slide/26">
<h2>Summary</h2>

<ul>
<li>Complexity never was a good idea</li>
<li>Web Forms 2.0 could be done in a way that doesn't break deadline</li>
</ul>
</div>
</div></div>

</body>
</html>
